(function(t){function e(e){for(var a,i,r=e[0],c=e[1],l=e[2],u=0,f=[];u<r.length;u++)i=r[u],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&f.push(s[i][0]),s[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(f.length)f.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,i=1;i<n.length;i++){var c=n[i];0!==s[c]&&(a=!1)}a&&(o.splice(e--,1),t=r(r.s=n[0]))}return t}var a={},s={app:0},o=[];function i(t){return r.p+"static/js/"+({about:"about"}[t]||t)+"."+{about:"7e766ea9"}[t]+".js"}function r(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.e=function(t){var e=[],n=s[t];if(0!==n)if(n)e.push(n[2]);else{var a=new Promise((function(e,a){n=s[t]=[e,a]}));e.push(n[2]=a);var o,c=document.createElement("script");c.charset="utf-8",c.timeout=120,r.nc&&c.setAttribute("nonce",r.nc),c.src=i(t);var l=new Error;o=function(e){c.onerror=c.onload=null,clearTimeout(u);var n=s[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",l.name="ChunkLoadError",l.type=a,l.request=o,n[1](l)}s[t]=void 0}};var u=setTimeout((function(){o({type:"timeout",target:c})}),12e4);c.onerror=c.onload=o,document.head.appendChild(c)}return Promise.all(e)},r.m=t,r.c=a,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var d=l;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0487":function(t,e,n){},"0a8f":function(t,e,n){},1687:function(t,e,n){"use strict";var a=n("9377"),s=n.n(a);s.a},"1c34":function(t,e,n){"use strict";var a=n("a26f"),s=n.n(a);s.a},"210c":function(t,e,n){},2119:function(t,e,n){},2349:function(t,e,n){},2479:function(t,e,n){},"24f9":function(t,e,n){"use strict";var a=n("8f95"),s=n.n(a);s.a},3380:function(t,e,n){"use strict";var a=n("7c63"),s=n.n(a);s.a},"379a":function(t,e){t.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAeAB4AAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wAARCAA5AFwDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD9I7jVpI5nREXCkj5smo/7Zn/ux/kf8aq3X/H1N/vt/Ooq7FCNtjncmX/7Zn/ux/kf8aP7Zn/ux/kf8aoUU+SPYXMy/wD2zP8A3Y/yP+NH9sz/AN2P8j/jVCijkj2DmZf/ALZn/ux/kf8AGj+2Z/7sf5H/ABqhRRyR7BzMv/2zP/dj/I/40f2zP/dj/I/41Qoo5I9g5mX/AO2Zv7kf5H/GtaGTzoUfGNwziuarobH/AI9Iv90VlUiktDSDbeph3X/H1N/vt/Ooqluv+Pqb/fb+dRVutjJ7hRRRTEFFFFABRRRQAUUUUAFdDY/8ekX+6K56uhsf+PSL/dFYVdjWnuYd1/x9Tf77fzqKpbr/AI+pv99v51FWy2M3uFFFFMQUUUUAFFFFABRRRQAV0Nj/AMekX+6K56uhsf8Aj0i/3RWFXY1p7mJeIy3UuVI+Yn9ai2n0rp6Kn2vkPkOY2n0o2n0rp6KftfIPZ+ZzG0+lG0+ldPRR7XyD2fmcxtPpRtPpXT0Ue18g9n5nMbT6UbT6V09FHtfIPZ+ZzG0+ldDZqVtYgRghRxU1FZynzFRjyn//2Q=="},5509:function(t){t.exports=JSON.parse('{"zh_cn":{"wait":"请稍后…","recording":"好，请讲…","say_nothing":"您好像没说什么","not_supported":"无法录音：未找到录音设备、当前浏览器不支持录音或用户未授权！","socket_error":"WebSocket连接失败","access_microphone_failed":"请求麦克风失败","missing_configuration":"缺少 appId、apiKey、apiSecret 配置"},"en_us":{"wait":"Please wait…","recording":"Recording…","say_nothing":"You don\'t seem to say anything","not_supported":"Unable to record: No recording device was found, the current browser does not support recording, or the user is not authorized!","socket_error":"socket connect failed","access_microphone_failed":"access microphone failed","missing_configuration":"Missing appId, apiKey and apiSecret configuration"}}')},5643:function(t,e,n){"use strict";var a=n("5b22"),s=n.n(a);s.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("transition",{attrs:{name:t.transitionName}},[n("router-view",{staticClass:"Router"})],1)],1)},o=[],i={data:function(){return{transitionName:"slide-right"}},watch:{$route:function(){var t=this.$router.isBack;this.transitionName=t?"slide-right":"slide-left",this.$router.isBack=!1}}},r=i,c=(n("5c0b"),n("2877")),l=Object(c["a"])(r,s,o,!1,null,null,null),u=l.exports,d=n("9483");Object(d["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});n("d3b7");var f=n("8c4f"),h=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},p=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("div",[t._v("test")]),a("img",{attrs:{alt:"Vue logo",src:n("cf05")}})])}],v={name:"Home"},m=v,g=Object(c["a"])(m,h,p,!1,null,null,null),y=(g.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"Main"},on:{touchmove:t.preventTouch}},[n("meta",{attrs:{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no, viewport-fit=cover"}}),n("h1",[t._v("我的想法")]),n("div",{attrs:{id:"signer"},on:{click:t.back}},[t._v(t._s(t.$store.getters.userName))]),n("main",{staticClass:"content"},[n("div",{staticClass:"inner"},[n("div",{staticClass:"comments"},t._l(t.commentdata,(function(t){return n("comment",{key:t.id,attrs:{keypass:t.id,titlein:t.title,responsein:t.responses}})})),1)])])])}),b=[],w=(n("ac1f"),n("5319"),n("bc3a")),k=n.n(w),_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("div",{staticClass:"Main"},[n("van-swipe-cell",{scopedSlots:t._u([{key:"right",fn:function(){return[n("van-button",{style:{height:"100%"},attrs:{square:"",type:"danger",text:"Delete"},on:{click:t.getoff}})]},proxy:!0}],null,!1,3493956779)},[n("div",{staticClass:"comment1",on:{click:t.gotolink}},[n("div",{staticClass:"title"},[t._v(" "+t._s(t.title)+" ")]),n("div",{staticClass:"iconWrapper"},[n("van-icon",{attrs:{name:"arrow",id:"next",size:"25"}})],1)])])],1):t._e()},C=[],A={name:"comment",data:function(){return{show:!0,title:this.titlein,response:this.responsein,key:this.keypass,distpass:{}}},props:["titlein","responsein","keypass"],methods:{getoff:function(){k()({method:"DELETE",url:"/api/record/".concat(this.key,"/"),params:{token:this.$store.getters.token}}),this.show=!1},gotolink:function(){this.$router.push({path:"/Discuss",query:{id:this.key}})}}},x=A,S=(n("a292"),Object(c["a"])(x,_,C,!1,null,"5ca37694",null)),B=S.exports,E={name:"Main",data:function(){return{commentdata:[]}},components:{comment:B},methods:{back:function(){this.$router.replace("/community")},preventTouch:function(t){t.preventDefault()}},mounted:function(){var t=this;k()({method:"GET",url:"/api/record/",params:{token:this.$store.getters.token}}).then((function(e){t.commentdata=e.data.data}))}},D=E,R=(n("98e1"),Object(c["a"])(D,y,b,!1,null,"35e431a8",null)),$=R.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"Main"}},[n("meta",{attrs:{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no, viewport-fit=cover"}}),n("div",{staticClass:"gotoWrapper"},[n("div",{staticClass:"back",on:{click:t.goback}},[t._v("返回")]),n("div",{staticClass:"lite",on:{click:t.goLite}},[t._v("Lite")])]),n("div",{staticClass:"title"},[t._v(t._s(t.title))]),n("main",{staticClass:"content"},[n("div",{staticClass:"inner"},[t._m(0),n("proconBar"),t._m(1),n("proconContent",{ref:"proconContent",staticClass:"proconContent"}),n("van-button",{attrs:{color:"#2c2e38",size:"large",id:"addResponse"},on:{click:t.showPopup}},[n("div",[t._v("Add your response")])])],1)]),n("van-popup",{staticClass:"popper",attrs:{position:"bottom",round:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("popup",{ref:"popup",attrs:{title:t.title},on:{getcache:t.cacheGet,getproTag:t.protagDown,getconTag:t.contagDown}})],1)],1)},O=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"procon"},[n("span",[t._v("支持")]),n("span",[t._v("反对")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"procon2"},[n("span",[t._v("支持")]),n("span",[t._v("反对")])])}],T=(n("a15b"),function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),I=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bar"},[n("div",{staticClass:"proBar"}),n("div",{staticClass:"conBar"})])}],U={name:"proconBar",data:function(){return{}}},j=U,F=(n("24f9"),Object(c["a"])(j,T,I,!1,null,"5e9d22aa",null)),P=F.exports,Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Main"},[n("div",{staticClass:"proContent"},t._l(t.prodata,(function(t,e){return n("adviceleft",{key:e,attrs:{inputPro:t.pros,delID:t.id}})})),1),n("div",{staticClass:"conContent"},t._l(t.condata,(function(t,e){return n("adviceright",{key:e,attrs:{inputCon:t.cons,delID:t.id}})})),1)])},z=[],K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("div",{staticClass:"Main"},[n("van-swipe-cell",{staticClass:"advice",scopedSlots:t._u([{key:"left",fn:function(){return[n("van-button",{style:{height:"100%"},attrs:{square:"",type:"danger",text:"Delete"},on:{click:t.getoff}})]},proxy:!0}],null,!1,2764488944)},[n("van-cell",{staticClass:"value",attrs:{value:t.a}})],1)],1):t._e()},N=[],q={name:"adviceleft",data:function(){return{show:!0,a:this.inputPro,id:this.delID}},props:["inputPro","delID"],methods:{getoff:function(){var t=this;k()({method:"DELETE",url:"/api/pros/".concat(this.id,"/"),params:{token:this.$store.getters.token}}).then((function(e){t.show=!1,console.log("Delete successfully")}))}}},H=q,L=(n("1687"),Object(c["a"])(H,K,N,!1,null,"8f1c4ffc",null)),W=L.exports,G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("div",{staticClass:"Main"},[n("van-swipe-cell",{staticClass:"advice",scopedSlots:t._u([{key:"right",fn:function(){return[n("van-button",{style:{height:"100%"},attrs:{square:"",type:"danger",text:"Delete"},on:{click:t.getoff}})]},proxy:!0}],null,!1,3493956779)},[n("van-cell",{staticClass:"value",attrs:{value:t.a}})],1)],1):t._e()},Z=[],J={name:"adviceright",data:function(){return{show:!0,a:this.inputCon,id:this.delID}},props:["inputCon","delID"],methods:{getoff:function(){var t=this;k()({method:"DELETE",url:"/api/cons/".concat(this.id,"/"),params:{token:this.$store.getters.token}}).then((function(e){t.show=!1,console.log("Delete successfully")}))}}},V=J,Y=(n("c26e"),Object(c["a"])(V,G,Z,!1,null,"23f147f1",null)),X=Y.exports,tt={name:"proconContent",components:{adviceleft:W,adviceright:X},data:function(){return{prodata:[],condata:[]}}},et=tt,nt=(n("9be1"),Object(c["a"])(et,Q,z,!1,null,"37647571",null)),at=nt.exports,st=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Main"},[n("div",{staticClass:"trustWrapper"},[n("div",{staticClass:"span1"},[t._v("HELP ME DECIDE")]),n("div",{staticClass:"title"},[t._v(t._s(t.realtitle))]),n("div",{attrs:{id:"decisionWrapper"}},[n("div",{staticClass:"decision"},[t._v(t._s(t.decision))])])]),n("van-slider",{staticClass:"slider",style:{border:"1px solid #2c2e38"},attrs:{step:1,"active-color":"#2c2e38","inactive-color":"#ffffff","bar-height":"14px"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),n("div",{attrs:{id:"compareWrapper"}},[n("span",[t._v("强烈反对")]),n("span",[t._v("反对")]),n("span",[t._v("支持")]),n("span",[t._v("强烈支持")]),n("div",{staticClass:"tagWrapper"},t._l(t.keyData,(function(e,a){return n("tag",{key:a,staticClass:"tag",attrs:{tagname:e},on:{closetag:t.tagDelete}})})),1)]),n("div",{attrs:{id:"recordWrapper"}},[n("van-icon",{attrs:{id:"recordButton",name:"stop-circle-o",size:"2rem"},on:{click:t.showOverlay}}),n("van-field",{staticClass:"input",attrs:{placeholder:"Tell me why?",type:"textarea"},on:{input:t.debouncer,compositionstart:function(e){t.flag=!1},compositionend:function(e){t.flag=!0},keyup:t.pinyin},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}})],1),n("van-button",{staticClass:"postResponse",attrs:{color:"#2c2e38",size:"large"},on:{click:t.postup}},[n("div",[t._v("Post response")])]),t.overlay?n("audioRecord",{on:{record:t.showResult,"record-start":t.recordStart,"record-stop":t.recordStop,"record-blank":t.recordNoResult,"record-failed":t.recordFailed,"record-complete":t.recordComplete}}):t._e()],1)},ot=[],it=(n("a434"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Main"},[t.show?n("van-tag",{attrs:{closeable:"",size:"medium",color:"#2c2e38"},on:{close:t.close}},[t._v(t._s(t.tagName))]):t._e()],1)}),rt=[],ct={name:"tag",props:["tagname"],data:function(){return{show:!0,tagName:this.tagname}},methods:{close:function(){this.show=!1,this.$emit("closetag",this.tagName)}}},lt=ct,ut=Object(c["a"])(lt,it,rt,!1,null,null,null),dt=ut.exports,ft=n("2ef0"),ht=n.n(ft),pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"audioRecord",attrs:{classif:{active:t.recording,ready:t.isAudioAvailable}}},[n("van-overlay",{attrs:{show:t.showup},on:{click:t.destroy}},[n("div",{staticClass:"wrapper"},[n("div",{staticClass:"block"},[n("div",[t._v(t._s(this.$parent.input2))]),n("recordingicon",{staticClass:"icon"})],1)])])],1)},vt=[],mt=(n("4de4"),n("4160"),n("d81d"),n("07ac"),n("3835")),gt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},yt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Main"},[n("span",{staticClass:"start-taste-line"},[n("hr",{staticClass:"hr hr1"}),n("hr",{staticClass:"hr hr2"}),n("hr",{staticClass:"hr hr3"}),n("hr",{staticClass:"hr hr4"}),n("hr",{staticClass:"hr hr5"}),n("hr",{staticClass:"hr hr6"}),n("hr",{staticClass:"hr hr7"}),n("hr",{staticClass:"hr hr8"}),n("hr",{staticClass:"hr hr9"}),n("hr",{staticClass:"hr hr10"})])])}],bt={name:"recordingicon",data:function(){return{}}},wt=bt,kt=(n("70c2"),Object(c["a"])(wt,gt,yt,!1,null,"f52e0478",null)),_t=kt.exports,Ct=(n("99af"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("159b"),n("d4ec")),At=n("bee2"),xt=n("2909"),St=(n("fb6a"),n("25f0"),St||function(t,e){var n={},a=n.lib={},s=function(){},o=a.Base={extend:function(t){s.prototype=this;var e=new s;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},i=a.WordArray=o.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:4*t.length},toString:function(t){return(t||c).stringify(this)},concat:function(t){var e=this.words,n=t.words,a=this.sigBytes;if(t=t.sigBytes,this.clamp(),a%4)for(var s=0;s<t;s++)e[a+s>>>2]|=(n[s>>>2]>>>24-s%4*8&255)<<24-(a+s)%4*8;else if(65535<n.length)for(s=0;s<t;s+=4)e[a+s>>>2]=n[s>>>2];else e.push.apply(e,n);return this.sigBytes+=t,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n=[],a=0;a<e;a+=4)n.push(4294967296*t.random()|0);return new i.init(n,e)}}),r=n.enc={},c=r.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],a=0;a<t;a++){var s=e[a>>>2]>>>24-a%4*8&255;n.push((s>>>4).toString(16)),n.push((15&s).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,n=[],a=0;a<e;a+=2)n[a>>>3]|=parseInt(t.substr(a,2),16)<<24-a%8*4;return new i.init(n,e/2)}},l=r.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],a=0;a<t;a++)n.push(String.fromCharCode(e[a>>>2]>>>24-a%4*8&255));return n.join("")},parse:function(t){for(var e=t.length,n=[],a=0;a<e;a++)n[a>>>2]|=(255&t.charCodeAt(a))<<24-a%4*8;return new i.init(n,e)}},u=r.Utf8={stringify:function(t){try{return decodeURIComponent(escape(l.stringify(t)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(t){return l.parse(unescape(encodeURIComponent(t)))}},d=a.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new i.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=u.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,a=n.words,s=n.sigBytes,o=this.blockSize,r=s/(4*o);r=e?t.ceil(r):t.max((0|r)-this._minBufferSize,0);if(e=r*o,s=t.min(4*e,s),e){for(var c=0;c<e;c+=o)this._doProcessBlock(a,c);c=a.splice(0,e),n.sigBytes-=s}return new i.init(c,s)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});a.Hasher=d.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new f.HMAC.init(t,n).finalize(e)}}});var f=n.algo={};return n}(Math));(function(t){for(var e=St,n=e.lib,a=n.WordArray,s=n.Hasher,o=(n=e.algo,[]),i=[],r=function(t){return 4294967296*(t-(0|t))|0},c=2,l=0;64>l;){var u;t:{u=c;for(var d=t.sqrt(u),f=2;f<=d;f++)if(!(u%f)){u=!1;break t}u=!0}u&&(8>l&&(o[l]=r(t.pow(c,.5))),i[l]=r(t.pow(c,1/3)),l++),c++}var h=[];n=n.SHA256=s.extend({_doReset:function(){this._hash=new a.init(o.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,a=n[0],s=n[1],o=n[2],r=n[3],c=n[4],l=n[5],u=n[6],d=n[7],f=0;64>f;f++){if(16>f)h[f]=0|t[e+f];else{var p=h[f-15],v=h[f-2];h[f]=((p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3)+h[f-7]+((v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10)+h[f-16]}p=d+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&l^~c&u)+i[f]+h[f],v=((a<<30|a>>>2)^(a<<19|a>>>13)^(a<<10|a>>>22))+(a&s^a&o^s&o),d=u,u=l,l=c,c=r+p|0,r=o,o=s,s=a,a=p+v|0}n[0]=n[0]+a|0,n[1]=n[1]+s|0,n[2]=n[2]+o|0,n[3]=n[3]+r|0,n[4]=n[4]+c|0,n[5]=n[5]+l|0,n[6]=n[6]+u|0,n[7]=n[7]+d|0},_doFinalize:function(){var e=this._data,n=e.words,a=8*this._nDataBytes,s=8*e.sigBytes;return n[s>>>5]|=128<<24-s%32,n[14+(s+64>>>9<<4)]=t.floor(a/4294967296),n[15+(s+64>>>9<<4)]=a,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=s.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=s._createHelper(n),e.HmacSHA256=s._createHmacHelper(n)})(Math),function(){var t=St,e=t.enc.Utf8;t.algo.HMAC=t.lib.Base.extend({init:function(t,n){t=this._hasher=new t.init,"string"==typeof n&&(n=e.parse(n));var a=t.blockSize,s=4*a;n.sigBytes>s&&(n=t.finalize(n)),n.clamp();for(var o=this._oKey=n.clone(),i=this._iKey=n.clone(),r=o.words,c=i.words,l=0;l<a;l++)r[l]^=1549556828,c[l]^=909522486;o.sigBytes=i.sigBytes=s,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher;return t=e.finalize(t),e.reset(),e.finalize(this._oKey.clone().concat(t))}})}();var Bt=St;n("c975");(function(){var t=Bt,e=t.lib.WordArray;t.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,a=this._map;t.clamp(),t=[];for(var s=0;s<n;s+=3)for(var o=(e[s>>>2]>>>24-s%4*8&255)<<16|(e[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|e[s+2>>>2]>>>24-(s+2)%4*8&255,i=0;4>i&&s+.75*i<n;i++)t.push(a.charAt(o>>>6*(3-i)&63));if(e=a.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var n=t.length,a=this._map,s=a.charAt(64);s&&(s=t.indexOf(s),-1!=s&&(n=s));s=[];for(var o=0,i=0;i<n;i++)if(i%4){var r=a.indexOf(t.charAt(i-1))<<i%4*2,c=a.indexOf(t.charAt(i))>>>6-i%4*2;s[o>>>2]|=(r|c)<<24-o%4*8,o++}return e.create(s,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();n("a630"),n("c19f"),n("b680"),n("3ca3"),n("cfc3"),n("fd87");var Et=function(){var t=this;this.onmessage=function(t){switch(t.data.command){case"transform":e.transaction(t.data.buffer);break}};var e={transaction:function(n){var a=e.to16kHz(n),s=e.to16BitPCM(a);t.postMessage({buffer:s})},to16kHz:function(t){var e=new Float32Array(t),n=Math.round(e.length*(16e3/44100)),a=new Float32Array(n),s=(e.length-1)/(n-1);a[0]=e[0];for(var o=1;o<n-1;o++){var i=o*s,r=Math.floor(i).toFixed(),c=Math.ceil(i).toFixed(),l=i-r;a[o]=e[r]+(e[c]-e[r])*l}return a[n-1]=e[e.length-1],a},to16BitPCM:function(t){for(var e=2*t.length,n=new ArrayBuffer(e),a=new DataView(n),s=0,o=0;o<t.length;o++,s+=2){var i=Math.max(-1,Math.min(1,t[o]));a.setInt16(s,i<0?32768*i:32767*i,!0)}return Array.from(new Int8Array(a.buffer))},toBase64:function(t){for(var e="",n=new Uint8Array(t),a=n.byteLength,s=0;s<a;s++)e+=String.fromCharCode(n[s]);return window.btoa(e)}}},Dt=Et,Rt=(n("baa5"),n("ddb0"),n("2b3d"),function(t){var e=t.toString();e=e.substr(e.indexOf("{")+1),e=e.substr(0,e.lastIndexOf("}"));var n=new Blob([e]),a=URL.createObjectURL(n),s=new Worker(a);return URL.revokeObjectURL(a),s}),$t=Rt,Mt=n("5509"),Ot=$t(Dt),Tt=[],It=window.AudioContext||window.webkitAudioContext;navigator.getUserMedia=navigator.mediaDevices.getUserMedia||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,Ot.onmessage=function(t){Tt.push.apply(Tt,Object(xt["a"])(t.data.buffer))};var Ut=function(){function t(e){Object(Ct["a"])(this,t),this.config=e,this.state="end",this.language=e.language||"zh_cn",this.accent=e.accent||"mandarin",this.appId=e.appId,this.apiKey=e.apiKey,this.apiSecret=e.apiSecret,this.isAudioAvailable=!!(navigator.getUserMedia&&It&&Ot),this.pd=e.pd,this.rlang=e.rlang,this.ptt=e.ptt,this.nunum=e.nunum,this.vad_eos=e.vad_eos}return Object(At["a"])(t,[{key:"closeTrack",value:function(){try{this.recorder&&(this.recorder.disconnect(),this.recorder=null),this.mediaStream&&(this.recorder&&this.recorder.context&&this.mediaStream.disconnect(this.recorder),this.mediaStream.mediaStream.getTracks().forEach((function(t){t.stop()})))}catch(t){console.warn(t.message)}}},{key:"initRecorder",value:function(){var t=this;if("end"!==this.state){if(!this.context){var e=new It;this.context=e}this.recorder=this.context.createScriptProcessor(0,1,1);var n=function(e){if("end"!==t.state){var n=t.context.createMediaStreamSource(e);t.mediaStream=n,t.recorder&&(t.recorder.onaudioprocess=function(e){"end"!==t.state?t.sendData(e.inputBuffer.getChannelData(0)):t.closeTrack()}),t.connectWebsocket()}else t.closeTrack()},a=function(e){t.recorder=null,t.mediaStream=null,t.context=null,console.warn(e.message||Mt[t.language].access_microphone_failed)};navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(t){n(t)})).catch((function(t){a(t)})):navigator.getUserMedia({audio:!0,video:!1},(function(t){n(t)}),(function(t){a(t)}))}}},{key:"start",value:function(){var t=this;if(navigator.getUserMedia&&It)if(this.state="init",this.recorder){if("end"===this.state)return void this.closeTrack();this.connectWebsocket()}else setTimeout((function(){t.initRecorder()}),100);else alert(Mt[this.language].not_supported)}},{key:"stop",value:function(){this.state="end"}},{key:"sendData",value:function(t){Ot.postMessage({command:"transform",buffer:t})}},{key:"connectWebsocket",value:function(){var t=this,e="wss://iat-api.xfyun.cn/v2/iat",n="iat-api.xfyun.cn",a=this.apiKey,s=this.apiSecret,o=(new Date).toGMTString(),i="hmac-sha256",r="host date request-line",c="host: ".concat(n,"\ndate: ").concat(o,"\nGET /v2/iat HTTP/1.1"),l=Bt.HmacSHA256(c,s),u=Bt.enc.Base64.stringify(l),d='api_key="'.concat(a,'", algorithm="').concat(i,'", headers="').concat(r,'", signature="').concat(u,'"'),f=btoa(d),h="".concat(e,"?authorization=").concat(f,"&date=").concat(o,"&host=").concat(n);if("WebSocket"in window)this.ws=new WebSocket(h);else{if(!("MozWebSocket"in window))return alert(Mt[this.language].not_supported),null;this.ws=new MozWebSocket(h)}this.ws.onopen=function(e){t.mediaStream&&t.recorder&&(t.mediaStream.connect(t.recorder),t.recorder.connect(t.context.destination),t.state="ready",setTimeout((function(){t.wsOpened(e)}),100),t.config.onStart&&t.config.onStart(e))},this.ws.onmessage=function(e){t.config.onMessage&&t.config.onMessage(e),t.wsOnMessage(e)},this.ws.onerror=function(e){null!==t&&t.recorder.stop(),t.config.onError&&t.config.onError(e)},this.ws.onclose=function(t){console.log("ws通道已关闭")}}},{key:"wsOpened",value:function(){var t=this;if(1===this.ws.readyState){this.state="ing";var e=Tt.splice(0,1280),n={common:{app_id:this.appId},business:{language:this.language,domain:"iat",accent:this.accent,vad_eos:this.vad_eos,dwa:"wpgs",pd:this.pd,rlang:this.rlang,ptt:this.ptt,nunum:this.nunum},data:{status:0,format:"audio/L16;rate=16000",encoding:"raw",audio:this.ArrayBufferToBase64(e)}};this.ws.send(JSON.stringify(n)),this.handlerInterval=setInterval((function(){if(1===t.ws.readyState){if(0===Tt.length)return"end"===t.state&&(t.ws.send(JSON.stringify({data:{status:2,format:"audio/L16;rate=16000",encoding:"raw",audio:""}})),clearInterval(t.handlerInterval)),!1;var e=Tt.splice(0,1280);t.ws.send(JSON.stringify({data:{status:1,format:"audio/L16;rate=16000",encoding:"raw",audio:t.ArrayBufferToBase64(e)}}))}else clearInterval(t.handlerInterval)}),40)}}},{key:"wsOnMessage",value:function(t){var e=JSON.parse(t.data);0===e.code&&2===e.data.status&&this.ws.close(),0!==e.code&&(this.ws.close(),console.log("".concat(e.code,":").concat(e.message)))}},{key:"ArrayBufferToBase64",value:function(t){for(var e="",n=new Uint8Array(t),a=n.byteLength,s=0;s<a;s++)e+=String.fromCharCode(n[s]);return window.btoa(e)}}]),t}(),jt=Ut,Ft=(n("a9e3"),{appId:"5eb36bb1",apiKey:"f84419c9dc0214f21c03ccb5fc56b06f",apiSecret:"f7ca9546b632b65a09aeb4e437fe265b",interactiveMode:"press",returnMode:"increment",language:"zh_cn",vad_eos:1e4,accent:"mandarin"}),Pt={props:{appId:String,apiKey:String,apiSecret:String,language:String,accent:String,pd:String,rlang:String,ptt:Number,nunum:Number,vad_eos:Number},methods:{getConfig:function(t){return this.IATConfig||(this.IATConfig={}),this[t]||this.IATConfig[t]||Ft[t]}}},Qt=function(t,e){Object.defineProperty(t,e,{configurable:!1})},zt=[],Kt={name:"audioRecord",mixins:[Pt],components:{recordingicon:_t},data:function(){return{processing:!1,recording:!1,isAudioAvailable:!1,blank:!1,resultCache:{},result:"",responding:!1,showup:!1}},methods:{destroy:function(){this.$destroy()},start:function(){if(!this.isAudioAvailable){var t=this.getConfig;return t("appId")&&t("apiKey")&&t("apiSecret")?void alert(this.locale.not_supported):void alert(this.locale.missing_configuration)}this.showup=!0,this.reset(),this.recording=!0,this.recorder.start(),this.$emit("record-start")},setResult:function(t){var e=this;this.responding=!0;for(var n="",a=t.ws,s=0;s<a.length;s++)n+=a[s].cw[0].w;var o=t.pgs,i=t.sn,r=t.ls;if(o)if("apd"===o)this.appendResult(n,i);else{var c=Object(mt["a"])(t.rg,2),l=c[0],u=c[1];this.replaceResult(n,i,l,u)}else this.appendResult(n,i);var d=this.getResult();this.result=d,this.completeMode&&!r||(r&&this.reset(),d?(this.$emit("record",d),this.$emit("input",d),r&&this.$emit("record-complete",d)):(this.$emit("record-blank"),this.blank=!0,setTimeout((function(){e.blank=!1}),1e3)))},stop:function(){this.recording=!1,null!==this&&this.recorder.stop(),this.$emit("record-stop"),this.processing=!0},reset:function(){var t=this;zt.splice(0),this.resultCache={},this.responding=!1,setTimeout((function(){t.result=""}),500)},appendResult:function(t,e){this.resultCache[e]={text:t}},replaceResult:function(t,e,n,a){this.appendResult(t,e);for(var s=this.resultCache,o=n;o<=a;o++)s[o].discarded=!0},getResult:function(){return Object.values(this.resultCache).filter((function(t){return!t.discarded})).map((function(t){return t.text})).join("")}},mounted:function(){this.start()},computed:{state:function(){return this.recorder?this.recorder.state:"end"}},created:function(){var t=this,e=this.getConfig,n=new jt({onClose:function(){null!==t&&t.recorder.stop(),t.processing=!1},onError:function(){t.stop(),t.reset(),t.processing=!1,t.$emit("record-failed",error),alert(t.locale.socket_error)},onMessage:function(e){var n=JSON.parse(e.data);n.data&&n.data.result&&t.setResult(n.data.result)},onStart:function(){},appId:e("appId"),apiKey:e("apiKey"),apiSecret:e("apiSecret"),accent:e("accent"),language:e("language"),pd:e("pd"),rlang:e("rlang"),ptt:e("ptt"),nunum:e("nunum"),vad_eos:e("vad_eos")}),a=["appId","apiSecret","apiKey","accent","language","pd","rlang","ptt","nunum","vad_eos","config"];a.forEach((function(t){Qt(n,t)})),this.recorder=n,this.isAudioAvailable=this.recorder.isAudioAvailable&&e("appId")&&e("apiKey")&&e("apiSecret")},beforeDestroy:function(){this.stop(),this.recorder=null}},Nt=Kt,qt=(n("1c34"),Object(c["a"])(Nt,pt,vt,!1,null,null,null)),Ht=qt.exports,Lt={name:"popup",props:["title"],data:function(){return{flag:!0,input:"",input2:"",overlay:!1,value:50,cache:{},realtitle:this.title,decision:"我不确定",keyData:[]}},components:{audioRecord:Ht,tag:dt},methods:{tagDelete:function(t){for(var e=0;e<this.keyData.length;e++)this.keyData[e]===t&&this.keyData.splice(e,1)},pinyin:function(){this.flag&&this.debouncer()},debouncer:ht.a.debounce((function(){var t=this;k()({method:"POST",url:"/api/algorithmn/sentiment/score",data:{text:this.input}}).then((function(e){t.value=100*e.data})),k()({method:"POST",url:"/api/algorithmn/bd/comment",data:{text:this.input}}).then((function(e){for(var n=0;n<e.data.items.length;n++)t.keyData.push(e.data.items[n].prop)}))}),1e3),postup:function(){50!==this.value&&""!==this.input&&(this.value>50?(this.cache={value:this.value,pros:this.input},this.$emit("getproTag",this.keyData)):this.value<50&&(this.cache={value:this.value,cons:this.input},this.$emit("getconTag",this.keyData)),this.$emit("getcache",this.cache))},showOverlay:function(){this.overlay=!0},showResult:function(t){console.info("收到识别结果：",t),this.input2=t},recordStart:function(){console.info("录音开始")},recordStop:function(){console.info("录音结束"),this.input=this.input2,this.debouncer(),this.overlay=!1,this.input2=""},recordNoResult:function(){console.info("没有录到什么，请重试")},recordComplete:function(t){console.info("识别完成! 最终结果：",t)},recordFailed:function(t){console.info("识别失败，错误栈：",t)}},watch:{title:function(t){this.realtitle=t},value:function(t){this.decision=50<t&&t<=75?"我支持":75<t&&t<=100?"我强烈支持":25<=t&&t<50?"我反对":0<=t&&t<25?"我强烈反对":"我不确定"}},beforeDestroy:function(){this.keyData=[],this.input="",this.value=50}},Wt=Lt,Gt=(n("cc80"),Object(c["a"])(Wt,st,ot,!1,null,"009bd412",null)),Zt=Gt.exports,Jt={name:"Discuss",data:function(){return{show:!1,title:"",id:0,proKey:[],conKey:[]}},components:{proconBar:P,popup:Zt,proconContent:at},methods:{contagDown:function(t){for(var e=0;e<t.length;e++)this.conKey.push(t[e])},protagDown:function(t){for(var e=0;e<t.length;e++)this.proKey.push(t[e])},goLite:function(){this.$router.push({path:"/Lite",query:{id:this.id,keyData:this.keyData}})},showPopup:function(){this.show=!0},goback:function(){this.$router.push({path:"/Main",query:{id:this.id}})},cacheGet:function(t){var e=this;t.value>50?k()({method:"POST",url:"/api/record/".concat(this.id,"/pros/"),params:{pros:t.pros,tags:this.proKey.join(",")}}).then((function(t){console.log(t);var n=t.data;e.$refs.proconContent.prodata.push(n.pros),console.log("pros in success")})):t.value<50&&k()({method:"POST",url:"/api/record/".concat(this.id,"/cons/"),params:{cons:t.cons,tags:this.conKey.join(",")}}).then((function(t){var n=t.data;e.$refs.proconContent.condata.push(n.cons),console.log("cons in success")})),this.$refs.popup.keyData=[],this.$refs.popup.input="",this.$refs.popup.value=50,this.show=!1}},mounted:function(){var t=this;this.id=this.$route.query.id,k()({method:"GET",url:"/api/record/".concat(this.id,"/")}).then((function(e){var n=e.data.data;t.title=n.title.title,t.$refs.proconContent.prodata=n.pros,t.$refs.proconContent.condata=n.cons}))}},Vt=Jt,Yt=(n("b028"),Object(c["a"])(Vt,M,O,!1,null,"c0e7f57a",null)),Xt=Yt.exports,te=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"Main"}},[n("meta",{attrs:{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no, viewport-fit=cover"}}),n("div",{staticClass:"back",on:{click:t.goback}},[t._v("返回")]),n("van-field",{staticClass:"addTitle",attrs:{placeholder:"你的困扰是什么?",type:"textarea"},on:{input:t.debouncer,compositionstart:function(e){t.flag=!1},compositionend:function(e){t.flag=!0},keyup:t.pinyin},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),n("main",{staticClass:"content"},[n("div",{staticClass:"inner"},[t._m(0),n("proconBar"),t._m(1),n("proconContent",{ref:"proconContent",staticClass:"proconContent"}),n("van-button",{attrs:{color:"#2c2e38",size:"large",id:"addResponse"},on:{click:t.showPopup}},[n("div",[t._v("Add your response")])])],1)]),n("van-popup",{staticClass:"popper",attrs:{position:"bottom",round:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("popup",{ref:"popup",attrs:{title:t.value},on:{getcache:t.cacheGet,getproTag:t.protagDown,getconTag:t.contagDown}})],1)],1)},ee=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"procon"},[n("span",[t._v("支持")]),n("span",[t._v("反对")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"procon2"},[n("span",[t._v("支持")]),n("span",[t._v("反对")])])}],ne={name:"Discuss",data:function(){return{flag:!0,show:!1,value:"",id:0,proKey:[],conKey:[]}},components:{popup:Zt,proconContent:at,proconBar:P},methods:{pinyin:function(){this.flag&&this.debouncer()},goback:function(){this.$router.replace("/community")},debouncer:ht.a.debounce((function(){var t=this;k()({method:"POST",url:"/api/record/",params:{token:this.$store.getters.token,title:this.value}}).then((function(e){t.id=e.data.data.id,console.log("success")}))}),1e3),contagDown:function(t){for(var e=0;e<t.length;e++)this.conKey.push(t[e])},protagDown:function(t){for(var e=0;e<t.length;e++)this.proKey.push(t[e])},cacheGet:function(t){var e=this;t.value>50?k()({method:"POST",url:"/api/record/".concat(this.id,"/pros/"),params:{pros:t.pros,tags:this.proKey.join(",")}}).then((function(t){var n=t.data;e.$refs.proconContent.prodata.push(n.pros),console.log("pros in success")})):t.value<50&&k()({method:"POST",url:"/api/record/".concat(this.id,"/cons/"),params:{cons:t.cons,tags:this.conKey.join(",")}}).then((function(t){var n=t.data;e.$refs.proconContent.condata.push(n.cons),console.log("cons in success")})),this.$refs.popup.keyData=[],this.$refs.popup.input="",this.$refs.popup.value=50,this.show=!1},showPopup:function(){this.show=!0},preventTouch:function(t){t.preventDefault()}}},ae=ne,se=(n("923d"),Object(c["a"])(ae,te,ee,!1,null,"1e795c56",null)),oe=se.exports,ie=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"recordGlobal"},on:{touchmove:t.preventTouch}},[n("meta",{attrs:{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no, viewport-fit=cover"}}),n("h2",{staticClass:"recordTitle"},[t._v("实时转写")]),n("main",{staticClass:"recordMain"},[n("div",{staticClass:"buttonWrapper"},[t.show?n("audioRecord",{ref:"recorderButton",staticClass:"recordButton",on:{record:t.showResult,"record-start":t.recordStart,"record-stop":t.recordStop,"record-blank":t.recordNoResult,"record-failed":t.recordFailed,"record-complete":t.recordComplete}},[t._v("识别")]):t._e()],1),n("div",{staticClass:"resultWrapper"},[n("div",{staticClass:"output"},[t._v(t._s(t.result))])])])])},re=[],ce={name:"Recorder",data:function(){return{result:"",show:!0}},components:{audioRecord:Ht},methods:{preventTouch:function(t){t.preventDefault()},recordStart:function(){console.info("录音开始")},showResult:function(t){console.info("收到识别结果：",t),this.result=t},recordStop:function(){console.info("录音结束")},recordNoResult:function(){console.info("没有录到什么，请重试")},recordComplete:function(t){console.info("识别完成! 最终结果：",t)},recordFailed:function(t){console.info("识别失败，错误栈：",t)}}},le=ce,ue=(n("5643"),Object(c["a"])(le,ie,re,!1,null,null,null)),de=ue.exports,fe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"Main"},on:{touchmove:t.preventTouch}},[n("meta",{attrs:{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no, viewport-fit=cover"}}),n("h1",[t._v("注册")]),n("div",{staticClass:"inner"},[n("van-form",{staticClass:"form",on:{submit:t.onSubmit}},[n("van-field",{staticClass:"field",style:{background:"#f8f8f8"},attrs:{center:"",name:"用户名",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"}]},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),n("van-field",{staticClass:"field",style:{background:"#f8f8f8"},attrs:{center:"",type:"password",name:"密码",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),n("van-field",{staticClass:"field",style:{background:"#f8f8f8"},attrs:{center:"",type:"password",name:"密码",label:"二次确认",placeholder:"请再输入一次密码",rules:[{required:!0,message:"请再输入一次密码"}]},model:{value:t.passwordRe,callback:function(e){t.passwordRe=e},expression:"passwordRe"}}),n("van-field",{staticClass:"field",style:{background:"#f8f8f8"},attrs:{center:"",name:"邮箱/手机",label:"邮箱/手机",placeholder:"邮箱或手机号码",rules:[{required:!0,message:"请填写邮箱或手机号码"}]},model:{value:t.mailortel,callback:function(e){t.mailortel=e},expression:"mailortel"}}),n("van-field",{staticClass:"field",style:{background:"#f8f8f8"},attrs:{center:"",clearable:"",name:"短信验证码",label:"短信验证码",placeholder:"请输入短信验证码",rules:[{required:!0,message:"请输入短信验证码"}]},scopedSlots:t._u([{key:"button",fn:function(){return[n("van-button",{attrs:{round:"",size:"small",type:"primary",color:"#2c2e38",disabled:t.show,"native-type":"button"},on:{click:t.sendCode}},[t.show?t._e():n("div",[t._v("发送验证码")]),t.show?n("div",[t._v(t._s(t.count)+"s后重新发送")]):t._e()])]},proxy:!0}]),model:{value:t.sms,callback:function(e){t.sms=e},expression:"sms"}}),n("van-button",{staticClass:"btn",attrs:{round:"",block:"",type:"info","native-type":"submit",color:"#2c2e38"},on:{click:t.register}},[n("div",[t._v("注册")])])],1)],1)])},he=[],pe={name:"register",data:function(){return{username:"",password:"",passwordRe:"",mailortel:"",sms:"",show:!1,count:"",timer:null}},methods:{register:function(){var t=this;""!==this.username&&""!==this.password&&""!==this.passwordRe&&""!==this.mailortel&&""!==this.sms&&k()({method:"POST",url:"/api/user/register/",params:{username:this.username,password:this.password,check_password:this.passwordRe,phone_email:this.mailortel,code:this.sms}}).then((function(e){t.$notify({message:"注册成功！3s后进入登录界面",type:"success"}),console.log("success"),console.log(e),setTimeout((function(){t.$router.replace("/signIn")}),3e3)})).catch((function(e){console.log(e),t.$notify({type:"danger",message:"注册失败！"})}))},preventTouch:function(t){t.preventDefault()},sendCode:function(){var t=this;if(""!==this.username&&""!==this.password&&""!==this.passwordRe&&""!==this.mailortel)if(this.passwordRe===this.password){var e=60;this.timer||(this.count=e,this.show=!0,this.timer=setInterval((function(){t.count>0&&t.count<=e?t.count--:(t.show=!1,clearInterval(t.timer),t.timer=null)}),1e3)),k()({method:"POST",url:"/api/send/code/",params:{phone_email:this.mailortel}}).then((function(e){console.log("sms successfully send"),console.log(e),t.sms=e.msg}))}else alert("两次密码输入不一致")},onSubmit:function(t){console.log("submit",t)}}},ve=pe,me=(n("a180"),Object(c["a"])(ve,fe,he,!1,null,"03b29a3a",null)),ge=me.exports,ye=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"Main"},on:{touchmove:t.preventTouch}},[n("meta",{attrs:{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no, viewport-fit=cover"}}),n("h1",[t._v("登录")]),n("div",{staticClass:"inner"},[n("van-form",{staticClass:"form",on:{submit:t.onSubmit}},[n("van-field",{staticClass:"field",style:{background:"#f8f8f8"},attrs:{center:"",name:"用户名/手机/邮箱",label:"用户",placeholder:"用户名/手机/邮箱",rules:[{required:!0,message:"请填写用户名/手机/邮箱"}]},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),n("van-field",{staticClass:"field",style:{background:"#f8f8f8"},attrs:{center:"",type:"password",name:"密码",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),n("div",{staticStyle:{margin:"16px"}},[n("van-button",{attrs:{round:"",block:"",typeC:"info","native-type":"submit",color:"#2c2e38"},on:{click:t.signin}},[n("div",{style:{font:"black",fontWeight:"bold"}},[t._v("登录")])]),n("div",{staticClass:"noregister",on:{click:t.goregister}},[t._v("注册")])],1)],1)],1)])},be=[],we={name:"signIn",data:function(){return{username:"",password:""}},methods:{goregister:function(){this.$router.replace("/register")},signin:function(){var t=this;""!==this.username&&""!==this.password&&k()({method:"POST",url:"/api/user/login/",params:{username:this.username,password:this.password}}).then((function(e){t.$notify({message:"登录成功！",type:"success"}),console.log("success"),console.log(e),t.$store.commit("handleToken",e.data.token),t.$store.commit("handleUserName",t.username),t.$router.replace("/community")})).catch((function(e){console.log(e),t.$notify({type:"danger",message:"登陆失败！请检查您的用户名与密码是否匹配"})}))},preventTouch:function(t){t.preventDefault()},gotolink:function(){this.$router.replace("/Main")},onSubmit:function(t){console.log("submit",t)}}},ke=we,_e=(n("bcd1"),Object(c["a"])(ke,ye,be,!1,null,"7a8c368b",null)),Ce=_e.exports,Ae=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Main"},[n("meta",{attrs:{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no, viewport-fit=cover"}}),n("div",{staticClass:"back",on:{click:t.goBack}},[t._v("返回")]),n("div",{staticClass:"title"},[t._v("Rate")]),t._l(t.tag,(function(e,a){return n("rateSlider",{key:a,staticClass:"rateSlider",attrs:{tagword:e,recordid:t.id}})}))],2)},xe=[],Se=(n("1276"),n("53ca")),Be=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sliderWrapper"},[n("div",{staticClass:"tag"},[t._v(t._s(t.tag))]),n("van-slider",{staticClass:"slider",style:{border:"1px solid #2c2e38"},attrs:{step:1,"active-color":"#2c2e38","inactive-color":"#ffffff","bar-height":"14px"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)},Ee=[],De={name:"rateslider",props:["tagword","recordid"],data:function(){return{id:this.recordid,tag:this.tagword,value:50}},mounted:function(){var t=this;k()({method:"GET",url:"/api/record/".concat(this.id,"/keys/")}).then((function(e){console.log(e);for(var n=e.data.data,a=0;a<n.length;a++)if(n[a].keyword===t.tag){t.value=n[a].rating;break}}))},beforeDestroy:function(){var t=this;k()({method:"DELETE",url:"/api/record/".concat(this.id,"/keys/")}).then((function(e){console.log("deletesuccess"),k()({method:"POST",url:"/api/record/".concat(t.id,"/keys/"),params:{keyword:t.tag,rating:t.value}}).then(console.log("postsuccess"))})).catch((function(e){k()({method:"POST",url:"/api/record/".concat(t.id,"/keys/"),params:{keyword:t.tag,rating:t.value}}).then(console.log("postsuccess"))}))}},Re=De,$e=(n("f735"),Object(c["a"])(Re,Be,Ee,!1,null,"34395458",null)),Me=$e.exports,Oe={name:"Lite",data:function(){return{flag:!1,id:this.$route.query.id,keyData:this.$route.query.keyData,tag:[]}},components:{rateSlider:Me},methods:{uniq:function(t){for(var e,n,a={},s=[],o=t.length,i=0;i<o;i++)e=t[i],n=Object(Se["a"])(e),a[e]?a[e].indexOf(n)<0&&(a[e].push(n),s.push(e)):(a[e]=[n],s.push(e));return s},goBack:function(){this.flag=!0,this.$router.push({path:"/Discuss",query:{id:this.id}})}},mounted:function(){var t=this;k()({method:"GET",url:"/api/record/".concat(this.id,"/pros/")}).then((function(e){var n=e.data.pros;if(0===n.length)console.log("no pro");else for(var a=0;a<n.length;a++)if(null!==n[a].tags){var s=t.tag.concat(n[a].tags.split(","));t.tag=t.uniq(s)}})),k()({method:"GET",url:"/api/record/".concat(this.id,"/cons/")}).then((function(e){var n=e.data.cons;if(0===n.length)console.log("no con");else for(var a=0;a<n.length;a++)if(null!==n[a].tags){var s=t.tag.concat(n[a].tags.split(","));t.tag=t.uniq(s)}}))}},Te=Oe,Ie=(n("3380"),Object(c["a"])(Te,Ae,xe,!1,null,"6bc72ee8",null)),Ue=Ie.exports,je=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Main"},[a("meta",{attrs:{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no, viewport-fit=cover"}}),a("van-search",{staticClass:"searchIn",attrs:{shape:"round",placeholder:"请输入搜索关键词"},scopedSlots:t._u([{key:"left",fn:function(){return[a("van-icon",{staticClass:"search",attrs:{name:"wap-nav",size:"18",color:"#c0c2d4"}})]},proxy:!0}]),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),a("div",{staticClass:"content"},[a("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e){return a("van-card",{key:e,attrs:{border:!1},scopedSlots:t._u([{key:"thumb",fn:function(){return[a("img",{staticClass:"img",attrs:{src:n("379a")}})]},proxy:!0},{key:"desc",fn:function(){return[a("div",{staticClass:"description"},[t._v("我应该在大城市生活吗？")])]},proxy:!0},{key:"tags",fn:function(){return[a("div",{staticClass:"bar"},[a("div",{staticClass:"proBar"}),a("div",{staticClass:"conBar"})])]},proxy:!0}],null,!0)})})),1)],1),a("van-nav-bar",{attrs:{title:"标题","left-text":"返回"},scopedSlots:t._u([{key:"left",fn:function(){return[a("van-icon",{staticClass:"left",attrs:{name:"browsing-history",size:"18",color:"#2c2e38"}})]},proxy:!0},{key:"title",fn:function(){return[a("van-icon",{attrs:{name:"add",size:"50",color:"#c0c2d4"},on:{click:t.gotoAsk}})]},proxy:!0},{key:"right",fn:function(){return[a("van-icon",{staticClass:"right",attrs:{name:"manager-o",size:"18",color:"#c0c2d4"},on:{click:t.gotoMain}})]},proxy:!0}])})],1)},Fe=[],Pe={name:"community",data:function(){return{value:"",list:[],loading:!1,finished:!1}},methods:{gotoMain:function(){null===this.$store.getters.token?(this.$notify({type:"warning",message:"未登录，请先登录"}),this.$router.push({name:"signIn"})):this.$router.push({name:"Main"})},gotoAsk:function(){null===this.$store.getters.token?(this.$notify({type:"warning",message:"未登录，请先登录"}),this.$router.push({name:"signIn"})):this.$router.push({name:"Ask"})},onLoad:function(){var t=this;setTimeout((function(){for(var e=0;e<10;e++)t.list.push(t.list.length+1);t.loading=!1,t.list.length>=40&&(t.finished=!0)}),1e3)}}},Qe=Pe,ze=(n("d55a"),Object(c["a"])(Qe,je,Fe,!1,null,"10a89e03",null)),Ke=ze.exports;a["a"].use(f["a"]),f["a"].prototype.goBack=function(){this.isBack=!0,window.history.go(-1)};var Ne=[{path:"/",name:"community",component:Ke},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}},{path:"/Main",name:"Main",component:$},{path:"/Discuss",name:"Discuss",component:Xt},{path:"/Ask",name:"Ask",component:oe},{path:"/recorder",name:"recorder",component:de},{path:"/register",name:"register",component:ge},{path:"/signIn",name:"signIn",component:Ce},{path:"/Lite",name:"Lite",component:Ue},{path:"/community",name:"community",component:Ke}],qe=new f["a"]({base:"",routes:Ne}),He=qe,Le=n("2f62");a["a"].use(Le["a"]);var We=new Le["a"].Store({state:{user_name:localStorage.getItem("user_name"),token:localStorage.getItem("token"),tag:localStorage.getItem("tag")},mutations:{handleToken:function(t,e){t.token=e,localStorage.setItem("token",e)},handleUserName:function(t,e){t.user_name=e,localStorage.setItem("user_name",e)},handleTag:function(t,e){t.tag=e,localStorage.setItem("tag",e)}},actions:{},modules:{},getters:{userName:function(t){return t.user_name},token:function(t){return t.token},tag:function(t){return t.tag}}}),Ge=n("f564"),Ze=n("6b41"),Je=n("66fd"),Ve=n("d961"),Ye=n("2bdd"),Xe=n("a3e2"),tn=n("6e47"),en=n("772a"),nn=n("ad06"),an=n("c36e"),sn=n("7744"),on=n("34e9"),rn=n("565f"),cn=n("8ad4"),ln=n("b650"),un=n("e41f");n("157a");a["a"].use(Ge["a"]),a["a"].use(Ze["a"]),a["a"].use(Je["a"]),a["a"].use(Ve["a"]),a["a"].use(Ye["a"]),a["a"].use(Xe["a"]),a["a"].use(tn["a"]),a["a"].use(en["a"]),a["a"].use(nn["a"]),a["a"].use(an["a"]),a["a"].use(sn["a"]),a["a"].use(on["a"]),a["a"].use(rn["a"]),a["a"].use(cn["a"]),a["a"].use(ln["a"]),a["a"].use(un["a"]),a["a"].config.productionTip=!1,new a["a"]({router:He,store:We,render:function(t){return t(u)}}).$mount("#app")},"5b22":function(t,e,n){},"5c0b":function(t,e,n){"use strict";var a=n("9c0c"),s=n.n(a);s.a},"638c":function(t,e,n){},"67e3":function(t,e,n){},"70c2":function(t,e,n){"use strict";var a=n("772e"),s=n.n(a);s.a},"772e":function(t,e,n){},"7a30":function(t,e,n){},"7c63":function(t,e,n){},"8f95":function(t,e,n){},"923d":function(t,e,n){"use strict";var a=n("2479"),s=n.n(a);s.a},9377:function(t,e,n){},"98e1":function(t,e,n){"use strict";var a=n("0487"),s=n.n(a);s.a},"9be1":function(t,e,n){"use strict";var a=n("fb02"),s=n.n(a);s.a},"9c0c":function(t,e,n){},a180:function(t,e,n){"use strict";var a=n("67e3"),s=n.n(a);s.a},a26f:function(t,e,n){},a292:function(t,e,n){"use strict";var a=n("7a30"),s=n.n(a);s.a},b028:function(t,e,n){"use strict";var a=n("2349"),s=n.n(a);s.a},bcd1:function(t,e,n){"use strict";var a=n("ef3c"),s=n.n(a);s.a},c26e:function(t,e,n){"use strict";var a=n("210c"),s=n.n(a);s.a},cc80:function(t,e,n){"use strict";var a=n("2119"),s=n.n(a);s.a},cf05:function(t,e,n){t.exports=n.p+"static/img/logo.82b9c7a5.png"},d55a:function(t,e,n){"use strict";var a=n("0a8f"),s=n.n(a);s.a},ef3c:function(t,e,n){},f735:function(t,e,n){"use strict";var a=n("638c"),s=n.n(a);s.a},fb02:function(t,e,n){}});
//# sourceMappingURL=app.d2406a4d.js.map